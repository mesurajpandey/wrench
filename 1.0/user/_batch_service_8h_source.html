<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.6"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <title>WRENCH: /home/wrench/wrench/include/wrench/services/compute/batch/BatchService.h Source File</title>
    <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <script type="text/javascript" src="jquery.smartmenus.js"></script>
    <!-- SmartMenus jQuery Bootstrap Addon -->
    <script type="text/javascript" src="jquery.smartmenus.bootstrap.js"></script>
    <!-- SmartMenus jQuery plugin -->
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a href="http://wrench-project.org" class="navbar-brand">
                <img alt="Logo" src="logo-horizontal.png" width="160" style="float: left"/>
                1.0
            </a>
        </div>
        <div id="main-nav" class="nav navbar-nav navbar-right">
            <ul class="sm sm-dox nav navbar-nav navbar-right" id="main-menu">
                <li><a href="index.html">Overview</a></li>
                <li><a href="install.html">Installation</a></li>
                <li><a href="getting-started.html">Getting Started</a></li>
                <li><a href="wrench-101.html">WRENCH 101</a></li>
                <li><a href="annotated.html">API Reference</a></li>
                <li style="float: right">
                    <input type="hidden" id="MSearchField">
                </li>
            </ul>
        </div>
    </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
                        <!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_a946ec3d4951f0462f08b8eca24d53fc.html">wrench</a></li><li class="navelem"><a class="el" href="dir_78f69c8f37113f3c52ce286c8cb26c80.html">services</a></li><li class="navelem"><a class="el" href="dir_78e00d7cb3eaa1760a4a1a5992629db9.html">compute</a></li><li class="navelem"><a class="el" href="dir_282fa7109df36fc7e75a0aa758d5faf6.html">batch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BatchService.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#ifndef WRENCH_BATCH_SERVICE_H</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define WRENCH_BATCH_SERVICE_H</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;wrench/services/compute/ComputeService.h&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;wrench/services/compute/standard_job_executor/StandardJobExecutor.h&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;wrench/services/compute/batch/BatchJob.h&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;wrench/services/compute/batch/BatschedNetworkListener.h&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;wrench/services/compute/batch/BatchServiceProperty.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;wrench/services/compute/batch/BatchServiceMessagePayload.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;wrench/services/helpers/Alarm.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;wrench/workflow/job/StandardJob.h&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;wrench/workflow/job/WorkflowJob.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;deque&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">namespace </span>wrench {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keyword">class </span>WorkloadTraceFileReplayer; <span class="comment">// forward</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classwrench_1_1_batch_service.html">   47</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classwrench_1_1_batch_service.html">BatchService</a> : <span class="keyword">public</span> <a class="code" href="classwrench_1_1_compute_service.html">ComputeService</a> {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        std::map&lt;std::string, std::string&gt; default_property_values = {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_property.html#af0abab1e3bce4932c4482031f0c31ce8">BatchServiceProperty::SUPPORTS_PILOT_JOBS</a>,                         <span class="stringliteral">&quot;true&quot;</span>},</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_property.html#a4e1b5e2e1effa86cfac0da608f112c14">BatchServiceProperty::SUPPORTS_STANDARD_JOBS</a>,                      <span class="stringliteral">&quot;true&quot;</span>},</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                 {<a class="code" href="classwrench_1_1_batch_service_property.html#ad60a71526e251e20cbd871e5d30e5023">BatchServiceProperty::THREAD_STARTUP_OVERHEAD</a>,                     <span class="stringliteral">&quot;0&quot;</span>},</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                 {<a class="code" href="classwrench_1_1_batch_service_property.html#af75bbbe70a733d3a65cddc5c57b0b441">BatchServiceProperty::HOST_SELECTION_ALGORITHM</a>,                    <span class="stringliteral">&quot;FIRSTFIT&quot;</span>},</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">                #ifdef ENABLE_BATSCHED</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"></span>                 {<a class="code" href="classwrench_1_1_batch_service_property.html#aceb0af1c33f5ff2da347f54a484ce32e">BatchServiceProperty::BATCH_SCHEDULING_ALGORITHM</a>,                  <span class="stringliteral">&quot;easy_bf&quot;</span>},</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                 {<a class="code" href="classwrench_1_1_batch_service_property.html#a51cc79b2c963a67dac5685fbba4e5a9f">BatchServiceProperty::BATCH_QUEUE_ORDERING_ALGORITHM</a>,              <span class="stringliteral">&quot;fcfs&quot;</span>},</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">                #else</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor"></span>                        {<a class="code" href="classwrench_1_1_batch_service_property.html#aceb0af1c33f5ff2da347f54a484ce32e">BatchServiceProperty::BATCH_SCHEDULING_ALGORITHM</a>,            <span class="stringliteral">&quot;FCFS&quot;</span>},</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">                #endif</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor"></span>                 {<a class="code" href="classwrench_1_1_batch_service_property.html#a685c9784445ed28adbe43f69ccb98249">BatchServiceProperty::BATCH_RJMS_DELAY</a>,                            <span class="stringliteral">&quot;0&quot;</span>},</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                 {<a class="code" href="classwrench_1_1_batch_service_property.html#a6a7fb4d9f505cc29f7236ea3e5713f34">BatchServiceProperty::SIMULATED_WORKLOAD_TRACE_FILE</a>,               <span class="stringliteral">&quot;&quot;</span>}</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                };</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        std::map&lt;std::string, std::string&gt; default_messagepayload_values = {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                 {<a class="code" href="classwrench_1_1_service_message_payload.html#a9efb4a6b2c8876e17a3f636ba5ac17f6">BatchServiceMessagePayload::STOP_DAEMON_MESSAGE_PAYLOAD</a>,                 <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#abfd5cdb62efb21fb3ebf7764b9c7ad47">BatchServiceMessagePayload::RESOURCE_DESCRIPTION_REQUEST_MESSAGE_PAYLOAD</a>,<span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a110f501ef6361a70627833e8ab5ab511">BatchServiceMessagePayload::RESOURCE_DESCRIPTION_ANSWER_MESSAGE_PAYLOAD</a>, <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                 {<a class="code" href="classwrench_1_1_service_message_payload.html#aec363c9226bc8285c41d9fff8c2814a9">BatchServiceMessagePayload::DAEMON_STOPPED_MESSAGE_PAYLOAD</a>,              <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a3ba0560d8901349f0fbd2ab7e6eb3862">BatchServiceMessagePayload::STANDARD_JOB_DONE_MESSAGE_PAYLOAD</a>,           <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a86cb39a4741f03121d6c8254d8cbaf1c">BatchServiceMessagePayload::SUBMIT_STANDARD_JOB_REQUEST_MESSAGE_PAYLOAD</a>, <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a1c23509b24aee6ea4e71b28497d659ba">BatchServiceMessagePayload::SUBMIT_STANDARD_JOB_ANSWER_MESSAGE_PAYLOAD</a>,  <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a24f99e315abb2e89e666e719af98d4dc">BatchServiceMessagePayload::TERMINATE_STANDARD_JOB_REQUEST_MESSAGE_PAYLOAD</a>,  <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a734ce7db76ab5ec58a6c692ce4b8e18f">BatchServiceMessagePayload::TERMINATE_STANDARD_JOB_ANSWER_MESSAGE_PAYLOAD</a>,  <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#aae15472660475257104b6717902fbffb">BatchServiceMessagePayload::SUBMIT_PILOT_JOB_REQUEST_MESSAGE_PAYLOAD</a>,    <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a421715521f0d2837e24e9e150da0de4a">BatchServiceMessagePayload::SUBMIT_PILOT_JOB_ANSWER_MESSAGE_PAYLOAD</a>,     <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#aafb88e732f10b7e26bd1fe39356457bf">BatchServiceMessagePayload::STANDARD_JOB_FAILED_MESSAGE_PAYLOAD</a>,         <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a0a91a957ed0eeba0bb35daea55b25fa5">BatchServiceMessagePayload::PILOT_JOB_STARTED_MESSAGE_PAYLOAD</a>,           <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a1f5b40748d7fe90fb682d735395de3af">BatchServiceMessagePayload::PILOT_JOB_EXPIRED_MESSAGE_PAYLOAD</a>,           <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#ad0bf94135d0c642785f4ce490a0dde0b">BatchServiceMessagePayload::TERMINATE_PILOT_JOB_ANSWER_MESSAGE_PAYLOAD</a>,  <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                 {<a class="code" href="classwrench_1_1_compute_service_message_payload.html#a6d80bf772eba3b8eb7224dc73e370cd0">BatchServiceMessagePayload::TERMINATE_PILOT_JOB_REQUEST_MESSAGE_PAYLOAD</a>, <span class="stringliteral">&quot;1024&quot;</span>},</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                };</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="classwrench_1_1_batch_service.html#a2f91405c977001fa52acda0fe849f143">BatchService</a>(std::string &amp;hostname,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                     std::vector&lt;std::string&gt; compute_hosts,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                     <span class="keywordtype">double</span> scratch_space_size,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                     std::map&lt;std::string, std::string&gt; property_list = {},</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                     std::map&lt;std::string, std::string&gt; messagepayload_list = {}</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        );</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        std::map&lt;std::string,double&gt; getStartTimeEstimates(std::set&lt;std::tuple&lt;std::string,unsigned int,unsigned int, double&gt;&gt;);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        ~<a class="code" href="classwrench_1_1_batch_service.html">BatchService</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">/***********************/</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keyword">friend</span> <span class="keyword">class </span>WorkloadTraceFileReplayer;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="classwrench_1_1_batch_service.html#a2f91405c977001fa52acda0fe849f143">BatchService</a>(std::string hostname,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                     std::vector&lt;std::string&gt; compute_hosts,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> cores_per_host,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                     <span class="keywordtype">double</span> ram_per_host,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                     <span class="keywordtype">double</span> scratch_space_size,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                     std::map&lt;std::string, std::string&gt; property_list,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                     std::map&lt;std::string, std::string&gt; messagepayload_list,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                     std::string suffix</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="comment">//submits a standard job</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordtype">void</span> submitStandardJob(StandardJob *job, std::map&lt;std::string, std::string&gt; &amp;batch_job_args) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">//submits a standard job</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordtype">void</span> submitPilotJob(PilotJob *job, std::map&lt;std::string, std::string&gt; &amp;batch_job_args) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">// terminate a standard job</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordtype">void</span> terminateStandardJob(StandardJob *job) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="comment">// terminate a pilot job</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordtype">void</span> terminatePilotJob(PilotJob *job) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        std::vector&lt;std::tuple&lt;std::string, double, double, double, double, unsigned int&gt;&gt; workload_trace;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        std::shared_ptr&lt;WorkloadTraceFileReplayer&gt; workload_trace_replayer;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordtype">bool</span> clean_exit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment">//Configuration to create randomness in measurement period initially</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> random_interval = 10;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="comment">//create alarms for standard jobs</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        std::map&lt;std::string,std::shared_ptr&lt;Alarm&gt;&gt; standard_job_alarms;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">//alarms for pilot jobs (only one pilot job alarm)</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        std::map&lt;std::string,std::shared_ptr&lt;Alarm&gt;&gt; pilot_job_alarms;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">/* Resources information in Batchservice */</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> total_num_of_nodes;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> num_cores_per_node;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        std::map&lt;std::string, unsigned long&gt; nodes_to_cores_map;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        std::vector&lt;double&gt; timeslots;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        std::map&lt;std::string, unsigned long&gt; available_nodes_to_cores;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        std::map&lt;unsigned long, std::string&gt; host_id_to_names;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        std::vector&lt;std::string&gt; compute_hosts;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="comment">/*End Resources information in Batchservice */</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">// Vector of standard job executors</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        std::set&lt;std::shared_ptr&lt;StandardJobExecutor&gt;&gt; running_standard_job_executors;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment">// Vector of standard job executors</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        std::set&lt;std::shared_ptr&lt;StandardJobExecutor&gt;&gt; finished_standard_job_executors;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">// Master List of batch jobs</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        std::set&lt;std::unique_ptr&lt;BatchJob&gt;&gt;  all_jobs;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">//Queue of pending batch jobs</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        std::deque&lt;BatchJob *&gt; pending_jobs;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">//A set of running batch jobs</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        std::set&lt;BatchJob *&gt; running_jobs;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">// A set of waiting jobs that have been submitted to batsched, but not scheduled</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        std::set&lt;BatchJob *&gt; waiting_jobs;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="comment">//Batch scheduling supported algorithms</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#ifdef ENABLE_BATSCHED</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor"></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> batsched_port; <span class="comment">// ONLY USED FOR BATSCHED</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        std::set&lt;std::string&gt; scheduling_algorithms = {<span class="stringliteral">&quot;easy_bf&quot;</span>, <span class="stringliteral">&quot;conservative_bf&quot;</span>, <span class="stringliteral">&quot;easy_bf_plot_liquid_load_horizon&quot;</span>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                                       <span class="stringliteral">&quot;energy_bf&quot;</span>, <span class="stringliteral">&quot;energy_bf_dicho&quot;</span>, <span class="stringliteral">&quot;energy_bf_idle_sleeper&quot;</span>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                       <span class="stringliteral">&quot;energy_bf_monitoring&quot;</span>,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                                       <span class="stringliteral">&quot;energy_bf_monitoring_inertial&quot;</span>, <span class="stringliteral">&quot;energy_bf_subpart_sleeper&quot;</span>,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                       <span class="stringliteral">&quot;filler&quot;</span>, <span class="stringliteral">&quot;killer&quot;</span>, <span class="stringliteral">&quot;killer2&quot;</span>, <span class="stringliteral">&quot;rejecter&quot;</span>, <span class="stringliteral">&quot;sleeper&quot;</span>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                                       <span class="stringliteral">&quot;submitter&quot;</span>, <span class="stringliteral">&quot;waiting_time_estimator&quot;</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        };</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">//Batch queue ordering options</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        std::set&lt;std::string&gt; queue_ordering_options = {<span class="stringliteral">&quot;fcfs&quot;</span>, <span class="stringliteral">&quot;lcfs&quot;</span>, <span class="stringliteral">&quot;desc_bounded_slowdown&quot;</span>, <span class="stringliteral">&quot;desc_slowdown&quot;</span>,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                                        <span class="stringliteral">&quot;asc_size&quot;</span>, <span class="stringliteral">&quot;desc_size&quot;</span>, <span class="stringliteral">&quot;asc_walltime&quot;</span>, <span class="stringliteral">&quot;desc_walltime&quot;</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        };</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor"></span>        std::set&lt;std::string&gt; scheduling_algorithms = {<span class="stringliteral">&quot;FCFS&quot;</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        };</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">//Batch queue ordering options</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        std::set&lt;std::string&gt; queue_ordering_options = {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        };</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> generateUniqueJobID();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordtype">void</span> removeJobFromRunningList(BatchJob *job);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordtype">void</span> freeJobFromJobsList(BatchJob* job);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordtype">int</span> main() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordtype">bool</span> processNextMessage();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordtype">void</span> startBackgroundWorkloadProcess();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordtype">void</span> processGetResourceInformation(<span class="keyword">const</span> std::string &amp;answer_mailbox);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordtype">void</span> processStandardJobCompletion(StandardJobExecutor *executor, StandardJob *job);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordtype">void</span> processStandardJobFailure(StandardJobExecutor *executor,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                       StandardJob *job,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                       std::shared_ptr&lt;FailureCause&gt; cause);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordtype">void</span> terminateRunningStandardJob(StandardJob *job);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        std::set&lt;std::tuple&lt;std::string, unsigned long, double&gt;&gt; scheduleOnHosts(std::string host_selection_algorithm,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                                                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, <span class="keywordtype">double</span>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        BatchJob *pickJobForScheduling(std::string);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">//Terminate the batch service (this is usually for pilot jobs when they act as a batch service)</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordtype">void</span> cleanup() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="comment">// Terminate currently running pilot jobs</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordtype">void</span> terminateRunningPilotJobs();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment">//Fail the standard jobs</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordtype">void</span> failCurrentStandardJobs();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">//Process the pilot job completion</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordtype">void</span> processPilotJobCompletion(PilotJob *job);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="comment">//Process standardjob timeout</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordtype">void</span> processStandardJobTimeout(StandardJob *job);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">//process standard job termination request</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordtype">void</span> processStandardJobTerminationRequest(StandardJob *job, std::string answer_mailbox);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">//process pilot job termination request</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keywordtype">void</span> processPilotJobTerminationRequest(PilotJob *job, std::string answer_mailbox);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="comment">//Process standardjob timeout</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordtype">void</span> processPilotJobTimeout(PilotJob *job);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">//free up resources</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordtype">void</span> freeUpResources(std::set&lt;std::tuple&lt;std::string, unsigned long, double&gt;&gt; resources);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="comment">//send call back to the pilot job submitters</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordtype">void</span> sendPilotJobExpirationNotification(PilotJob *job);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">//send call back to the standard job submitters</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordtype">void</span> sendStandardJobFailureNotification(StandardJob *job, std::string job_id, std::shared_ptr&lt;FailureCause&gt; cause);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">// Try to schedule a job</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordtype">bool</span> scheduleOneQueuedJob();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">// process a job submission</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordtype">void</span> processJobSubmission(BatchJob *job, std::string answer_mailbox);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">//start a job</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordtype">void</span> startJob(std::set&lt;std::tuple&lt;std::string, unsigned long, double&gt;&gt;, WorkflowJob *,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                      BatchJob *, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>, <span class="keywordtype">double</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">//vector of network listeners (only useful when ENABLE_BATSCHED == on)</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        std::map&lt;std::string,double&gt; getStartTimeEstimatesForFCFS(std::set&lt;std::tuple&lt;std::string,unsigned int,unsigned int, double&gt;&gt;);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#ifdef ENABLE_BATSCHED</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="preprocessor"></span>        std::vector&lt;std::shared_ptr&lt;BatschedNetworkListener&gt;&gt; network_listeners;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keyword">friend</span> <span class="keyword">class </span>BatschedNetworkListener;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        pid_t pid;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">//        bool is_bat_sched_ready;</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordtype">void</span> startBatsched();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordtype">void</span> stopBatsched();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">//        void setBatschedReady(bool v);</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">//        bool isBatschedReady();</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        std::map&lt;std::string,double&gt; getStartTimeEstimatesFromBatsched(std::set&lt;std::tuple&lt;std::string,unsigned int,unsigned int,double&gt;&gt;);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordtype">void</span> startBatschedNetworkListener();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordtype">void</span> notifyJobEventsToBatSched(std::string job_id, std::string status, std::string job_state,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                       std::string kill_reason, std::string even_type);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordtype">void</span> sendAllQueuedJobsToBatsched();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="comment">//process execute events from batsched</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordtype">void</span> processExecuteJobFromBatSched(std::string bat_sched_reply);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#endif // ENABLE_BATSCHED</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    };</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#endif //WRENCH_BATCH_SERVICE_H</span></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a1f5b40748d7fe90fb682d735395de3af"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a1f5b40748d7fe90fb682d735395de3af">wrench::ComputeServiceMessagePayload::PILOT_JOB_EXPIRED_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string PILOT_JOB_EXPIRED_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to state that a pilot job has expired...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:44</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_html"><div class="ttname"><a href="classwrench_1_1_batch_service.html">wrench::BatchService</a></div><div class="ttdoc">A batch-scheduled compute service that manages a set of compute hosts and controls access to their re...</div><div class="ttdef"><b>Definition:</b> BatchService.h:47</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_property_html_af75bbbe70a733d3a65cddc5c57b0b441"><div class="ttname"><a href="classwrench_1_1_batch_service_property.html#af75bbbe70a733d3a65cddc5c57b0b441">wrench::BatchServiceProperty::HOST_SELECTION_ALGORITHM</a></div><div class="ttdeci">static const std::string HOST_SELECTION_ALGORITHM</div><div class="ttdoc">The host selection algorithm. Can be: </div><div class="ttdef"><b>Definition:</b> BatchServiceProperty.h:57</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_property_html_a685c9784445ed28adbe43f69ccb98249"><div class="ttname"><a href="classwrench_1_1_batch_service_property.html#a685c9784445ed28adbe43f69ccb98249">wrench::BatchServiceProperty::BATCH_RJMS_DELAY</a></div><div class="ttdeci">static const std::string BATCH_RJMS_DELAY</div><div class="ttdoc">Number of seconds that the Batch Scheduler adds to the runtime of each incoming job. This is something production batch systems do to avoid too aggressive job terminations. For instance, if a job says it wants to run for (at most) 60 seconds, the system will actually assume the job wants to run for (at most) 60 + 5 seconds. </div><div class="ttdef"><b>Definition:</b> BatchServiceProperty.h:75</div></div>
<div class="ttc" id="classwrench_1_1_service_message_payload_html_a9efb4a6b2c8876e17a3f636ba5ac17f6"><div class="ttname"><a href="classwrench_1_1_service_message_payload.html#a9efb4a6b2c8876e17a3f636ba5ac17f6">wrench::ServiceMessagePayload::STOP_DAEMON_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string STOP_DAEMON_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent to the daemon to terminate it. </div><div class="ttdef"><b>Definition:</b> ServiceMessagePayload.h:31</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a24f99e315abb2e89e666e719af98d4dc"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a24f99e315abb2e89e666e719af98d4dc">wrench::ComputeServiceMessagePayload::TERMINATE_STANDARD_JOB_REQUEST_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string TERMINATE_STANDARD_JOB_REQUEST_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent to the daemon to terminate a standard job...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:34</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_ad0bf94135d0c642785f4ce490a0dde0b"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#ad0bf94135d0c642785f4ce490a0dde0b">wrench::ComputeServiceMessagePayload::TERMINATE_PILOT_JOB_ANSWER_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string TERMINATE_PILOT_JOB_ANSWER_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to acknowledge a pilot job termination...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:54</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a421715521f0d2837e24e9e150da0de4a"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a421715521f0d2837e24e9e150da0de4a">wrench::ComputeServiceMessagePayload::SUBMIT_PILOT_JOB_ANSWER_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string SUBMIT_PILOT_JOB_ANSWER_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent from the daemon to acknowledge a pilot job submission...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:40</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a1c23509b24aee6ea4e71b28497d659ba"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a1c23509b24aee6ea4e71b28497d659ba">wrench::ComputeServiceMessagePayload::SUBMIT_STANDARD_JOB_ANSWER_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string SUBMIT_STANDARD_JOB_ANSWER_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to acknowledge a standard job submissio...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:28</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a6d80bf772eba3b8eb7224dc73e370cd0"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a6d80bf772eba3b8eb7224dc73e370cd0">wrench::ComputeServiceMessagePayload::TERMINATE_PILOT_JOB_REQUEST_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string TERMINATE_PILOT_JOB_REQUEST_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent to the daemon to terminate a pilot job...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:52</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_aafb88e732f10b7e26bd1fe39356457bf"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#aafb88e732f10b7e26bd1fe39356457bf">wrench::ComputeServiceMessagePayload::STANDARD_JOB_FAILED_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string STANDARD_JOB_FAILED_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to state that a running standard job ha...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:32</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_property_html_a6a7fb4d9f505cc29f7236ea3e5713f34"><div class="ttname"><a href="classwrench_1_1_batch_service_property.html#a6a7fb4d9f505cc29f7236ea3e5713f34">wrench::BatchServiceProperty::SIMULATED_WORKLOAD_TRACE_FILE</a></div><div class="ttdeci">static const std::string SIMULATED_WORKLOAD_TRACE_FILE</div><div class="ttdoc">Path to a workload trace file to be replayed. The trace file neede to be in the SWF format (see http:...</div><div class="ttdef"><b>Definition:</b> BatchServiceProperty.h:65</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a734ce7db76ab5ec58a6c692ce4b8e18f"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a734ce7db76ab5ec58a6c692ce4b8e18f">wrench::ComputeServiceMessagePayload::TERMINATE_STANDARD_JOB_ANSWER_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string TERMINATE_STANDARD_JOB_ANSWER_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to acknowledge a standard job terminati...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:36</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_property_html_aceb0af1c33f5ff2da347f54a484ce32e"><div class="ttname"><a href="classwrench_1_1_batch_service_property.html#aceb0af1c33f5ff2da347f54a484ce32e">wrench::BatchServiceProperty::BATCH_SCHEDULING_ALGORITHM</a></div><div class="ttdeci">static const std::string BATCH_SCHEDULING_ALGORITHM</div><div class="ttdoc">The batch scheduling algorithm. Can be: </div><div class="ttdef"><b>Definition:</b> BatchServiceProperty.h:38</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a3ba0560d8901349f0fbd2ab7e6eb3862"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a3ba0560d8901349f0fbd2ab7e6eb3862">wrench::ComputeServiceMessagePayload::STANDARD_JOB_DONE_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string STANDARD_JOB_DONE_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to state that it has completed a standa...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:30</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_property_html_ad60a71526e251e20cbd871e5d30e5023"><div class="ttname"><a href="classwrench_1_1_batch_service_property.html#ad60a71526e251e20cbd871e5d30e5023">wrench::BatchServiceProperty::THREAD_STARTUP_OVERHEAD</a></div><div class="ttdeci">static const std::string THREAD_STARTUP_OVERHEAD</div><div class="ttdoc">The overhead to start a thread execution, in seconds. </div><div class="ttdef"><b>Definition:</b> BatchServiceProperty.h:27</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_aae15472660475257104b6717902fbffb"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#aae15472660475257104b6717902fbffb">wrench::ComputeServiceMessagePayload::SUBMIT_PILOT_JOB_REQUEST_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string SUBMIT_PILOT_JOB_REQUEST_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent to the daemon to submit a pilot job. </div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:38</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_html"><div class="ttname"><a href="classwrench_1_1_compute_service.html">wrench::ComputeService</a></div><div class="ttdoc">The compute service base class. </div><div class="ttdef"><b>Definition:</b> ComputeService.h:35</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_html_a2f91405c977001fa52acda0fe849f143"><div class="ttname"><a href="classwrench_1_1_batch_service.html#a2f91405c977001fa52acda0fe849f143">wrench::BatchService::BatchService</a></div><div class="ttdeci">BatchService(std::string &amp;hostname, std::vector&lt; std::string &gt; compute_hosts, double scratch_space_size, std::map&lt; std::string, std::string &gt; property_list={}, std::map&lt; std::string, std::string &gt; messagepayload_list={})</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> BatchService.cpp:97</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_property_html_af0abab1e3bce4932c4482031f0c31ce8"><div class="ttname"><a href="classwrench_1_1_compute_service_property.html#af0abab1e3bce4932c4482031f0c31ce8">wrench::ComputeServiceProperty::SUPPORTS_PILOT_JOBS</a></div><div class="ttdeci">static const std::string SUPPORTS_PILOT_JOBS</div><div class="ttdoc">Whether the compute service supports pilot jobs (true or false) </div><div class="ttdef"><b>Definition:</b> ComputeServiceProperty.h:26</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_abfd5cdb62efb21fb3ebf7764b9c7ad47"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#abfd5cdb62efb21fb3ebf7764b9c7ad47">wrench::ComputeServiceMessagePayload::RESOURCE_DESCRIPTION_REQUEST_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string RESOURCE_DESCRIPTION_REQUEST_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent to the daemon to ask it for information on its resour...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:56</div></div>
<div class="ttc" id="classwrench_1_1_batch_service_property_html_a51cc79b2c963a67dac5685fbba4e5a9f"><div class="ttname"><a href="classwrench_1_1_batch_service_property.html#a51cc79b2c963a67dac5685fbba4e5a9f">wrench::BatchServiceProperty::BATCH_QUEUE_ORDERING_ALGORITHM</a></div><div class="ttdeci">static const std::string BATCH_QUEUE_ORDERING_ALGORITHM</div><div class="ttdoc">The batch queue ordering algorithm. Can be: </div><div class="ttdef"><b>Definition:</b> BatchServiceProperty.h:47</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_property_html_a4e1b5e2e1effa86cfac0da608f112c14"><div class="ttname"><a href="classwrench_1_1_compute_service_property.html#a4e1b5e2e1effa86cfac0da608f112c14">wrench::ComputeServiceProperty::SUPPORTS_STANDARD_JOBS</a></div><div class="ttdeci">static const std::string SUPPORTS_STANDARD_JOBS</div><div class="ttdoc">Whether the compute service supports standard jobs (true or false) </div><div class="ttdef"><b>Definition:</b> ComputeServiceProperty.h:24</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a86cb39a4741f03121d6c8254d8cbaf1c"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a86cb39a4741f03121d6c8254d8cbaf1c">wrench::ComputeServiceMessagePayload::SUBMIT_STANDARD_JOB_REQUEST_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string SUBMIT_STANDARD_JOB_REQUEST_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent to the daemon to submit a standard job...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:26</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a0a91a957ed0eeba0bb35daea55b25fa5"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a0a91a957ed0eeba0bb35daea55b25fa5">wrench::ComputeServiceMessagePayload::PILOT_JOB_STARTED_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string PILOT_JOB_STARTED_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to state that a pilot job has started...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:42</div></div>
<div class="ttc" id="classwrench_1_1_service_message_payload_html_aec363c9226bc8285c41d9fff8c2814a9"><div class="ttname"><a href="classwrench_1_1_service_message_payload.html#aec363c9226bc8285c41d9fff8c2814a9">wrench::ServiceMessagePayload::DAEMON_STOPPED_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string DAEMON_STOPPED_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to confirm it has terminated. </div><div class="ttdef"><b>Definition:</b> ServiceMessagePayload.h:33</div></div>
<div class="ttc" id="classwrench_1_1_compute_service_message_payload_html_a110f501ef6361a70627833e8ab5ab511"><div class="ttname"><a href="classwrench_1_1_compute_service_message_payload.html#a110f501ef6361a70627833e8ab5ab511">wrench::ComputeServiceMessagePayload::RESOURCE_DESCRIPTION_ANSWER_MESSAGE_PAYLOAD</a></div><div class="ttdeci">static const std::string RESOURCE_DESCRIPTION_ANSWER_MESSAGE_PAYLOAD</div><div class="ttdoc">The number of bytes in the control message sent by the daemon to state information on its resources...</div><div class="ttdef"><b>Definition:</b> ComputeServiceMessagePayload.h:58</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
        Generated by &#160;<a href="http://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.png" alt="doxygen"/>
    </a> 1.8.6
    </small>
</address>
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-18066333-6', 'auto');
    ga('send', 'pageview');
</script>
</body>
<script type="text/javascript" src="doxy-boot.js"></script>
</html>
